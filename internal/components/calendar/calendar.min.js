(()=>{(function(){function w(e){if(!e||e.hasAttribute("data-tui-calendar-initialized"))return;e.setAttribute("data-tui-calendar-initialized","true");let y=e.querySelector("[data-tui-calendar-month-display]"),p=e.querySelector("[data-tui-calendar-weekdays]"),h=e.querySelector("[data-tui-calendar-days]"),b=e.querySelector("[data-tui-calendar-prev]"),I=e.querySelector("[data-tui-calendar-next]"),v=e.closest("[data-tui-calendar-wrapper]"),i=v?v.querySelector("[data-tui-calendar-hidden-input]"):null;if(!i){let t=e.id;if(t){let a=t.replace("-calendar-instance","");i=document.getElementById(a+"-hidden")}}if(!y||!p||!h||!b||!I){console.error("Calendar init error: Missing required elements.",e);return}let D=e.getAttribute("data-tui-calendar-locale-tag")||"en-US",U=parseInt(e.getAttribute("data-tui-calendar-start-of-week"))||1,C;try{C=Array.from({length:12},(t,a)=>new Intl.DateTimeFormat(D,{month:"long",timeZone:"UTC"}).format(new Date(Date.UTC(2e3,a,1))))}catch(t){console.error(`Calendar: Error generating month names via Intl (locale: "${D}"). Falling back to English.`,t),C=["January","February","March","April","May","June","July","August","September","October","November","December"]}let M=["Su","Mo","Tu","We","Th","Fr","Sa"];try{M=Array.from({length:7},(t,a)=>new Intl.DateTimeFormat(D,{weekday:"short",timeZone:"UTC"}).format(new Date(Date.UTC(2e3,0,a+2+U))))}catch(t){console.error("Error generating calendar day names via Intl:",t)}let n=parseInt(e.getAttribute("data-tui-calendar-initial-month")),l=parseInt(e.getAttribute("data-tui-calendar-initial-year")),m=null;e.getAttribute("data-tui-calendar-selected-date")&&(m=S(e.getAttribute("data-tui-calendar-selected-date")));function S(t){if(!t)return null;try{let a=t.split("-"),d=parseInt(a[0],10),s=parseInt(a[1],10)-1,u=parseInt(a[2],10),c=new Date(Date.UTC(d,s,u));if(!isNaN(c)&&c.getUTCFullYear()===d&&c.getUTCMonth()===s&&c.getUTCDate()===u)return c}catch{}return null}function g(){let t=Math.max(0,Math.min(11,n)),d=`${C[t]} ${l}`;y.textContent=d}function k(){p.innerHTML="",M.forEach(t=>{let a=document.createElement("div");a.className="text-center text-xs text-muted-foreground font-medium",a.textContent=t,p.appendChild(a)})}function f(){h.innerHTML="";let d=((new Date(Date.UTC(l,n,1)).getUTCDay()-U)%7+7)%7,s=new Date(Date.UTC(l,n+1,0)).getUTCDate(),u=new Date,c=new Date(Date.UTC(u.getFullYear(),u.getMonth(),u.getDate()));for(let o=0;o<d;o++){let r=document.createElement("div");r.className="h-8 w-8",h.appendChild(r)}for(let o=1;o<=s;o++){let r=document.createElement("button");r.type="button",r.className="inline-flex h-8 w-8 items-center justify-center rounded-md text-sm font-medium focus:outline-none focus:ring-1 focus:ring-ring",r.textContent=o,r.dataset.tuiCalendarDay=o;let x=new Date(Date.UTC(l,n,o)),F=m&&x.getTime()===m.getTime(),q=x.getTime()===c.getTime();F?r.classList.add("bg-primary","text-primary-foreground","hover:bg-primary/90"):q?r.classList.add("bg-accent","text-accent-foreground"):r.classList.add("hover:bg-accent","hover:text-accent-foreground"),r.addEventListener("click",N),h.appendChild(r)}}function A(){n--,n<0&&(n=11,l--),g(),f()}function L(){n++,n>11&&(n=0,l++),g(),f()}function N(t){let a=parseInt(t.target.dataset.tuiCalendarDay);if(!a)return;let d=new Date(Date.UTC(l,n,a));m=d;let s=d.toISOString().split("T")[0];i&&(i.value=s,i.dispatchEvent(new Event("change",{bubbles:!0}))),e.dispatchEvent(new CustomEvent("calendar-date-selected",{bubbles:!0,detail:{date:d}})),f()}b.addEventListener("click",A),I.addEventListener("click",L),g(),k(),f();let E=i?i.closest("form"):e.closest("form");E&&i&&E.addEventListener("reset",()=>{m=null,i.value="",n=new Date().getMonth(),l=new Date().getFullYear(),g(),f()}),e._calendarInitialized=!0}function T(e=document){e instanceof Element&&e.matches("[data-tui-calendar-container]")&&w(e);for(let y of e.querySelectorAll("[data-tui-calendar-container]:not([data-tui-calendar-initialized])"))w(y)}window.templUI=window.templUI||{},window.templUI.calendar={init:T},document.addEventListener("DOMContentLoaded",()=>T())})();})();
