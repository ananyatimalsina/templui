(()=>{(function(){function L(t){if(!t||typeof t!="string")return null;let e=t.match(/^(\d{1,2}):(\d{2})$/);if(!e)return null;let r=parseInt(e[1],10),i=parseInt(e[2],10);return r<0||r>23||i<0||i>59?null:{hour:r,minute:i}}function h(t,e,r){if(r){let i=t>=12?"PM":"AM";return`${(t===0?12:t>12?t-12:t).toString().padStart(2,"0")}:${e.toString().padStart(2,"0")} ${i}`}return`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}function q(t,e){return`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}function E(t,e,r){t.querySelectorAll("[data-tui-timepicker-hour]").forEach(i=>{let u=parseInt(i.getAttribute("data-tui-timepicker-hour")),c=!1;e!==null&&(r?c=u===e||u===0&&e===12||u===e-12&&e>12:c=u===e),i.setAttribute("data-tui-timepicker-selected",c?"true":"false")})}function P(t,e){t.querySelectorAll("[data-tui-timepicker-minute]").forEach(r=>{let i=parseInt(r.getAttribute("data-tui-timepicker-minute"));r.setAttribute("data-tui-timepicker-selected",i===e?"true":"false")})}function T(t,e){let r=t.querySelector('[data-tui-timepicker-period="AM"]'),i=t.querySelector('[data-tui-timepicker-period="PM"]');if(!r||!i)return;let u=e===null||e<12;r.setAttribute("data-tui-timepicker-active",u?"true":"false"),i.setAttribute("data-tui-timepicker-active",u?"false":"true")}function $(t,e,r,i,u){let c=t.querySelector("[data-tui-timepicker-display]");if(c)if(e!==null&&r!==null){let k=h(e,r,i);c.textContent=k,c.classList.remove("text-muted-foreground")}else c.textContent=u,c.classList.add("text-muted-foreground")}function w(t,e,r){let i=t.querySelector("[data-tui-timepicker-hidden-input]");i&&(e!==null&&r!==null?i.value=q(e,r):i.value="")}function A(t){if(!t||t.hasAttribute("data-tui-timepicker-initialized"))return;t.setAttribute("data-tui-timepicker-initialized","true");let e=t.id,r=e+"-content",i=t.getAttribute("data-tui-timepicker-use12hours")==="true",u=t.getAttribute("data-tui-timepicker-am-label")||"AM",c=t.getAttribute("data-tui-timepicker-pm-label")||"PM",k=t.getAttribute("data-tui-timepicker-placeholder")||"Select time",n=null,d=null,y=document.getElementById(r);if(!y){console.error("TimePicker init error: Missing popup content.",{timePickerID:e,popupId:r});return}let o=y.querySelector("[data-tui-timepicker-popup]"),m=o?.querySelector("[data-tui-timepicker-hour-list]"),f=o?.querySelector("[data-tui-timepicker-minute-list]"),S=o?.querySelector("[data-tui-timepicker-done]");if(!o||!m||!f||!S){console.error("TimePicker init error: Missing required elements.",{timePickerID:e,popup:o,hourList:m,minuteList:f,doneButton:S});return}let M=o.getAttribute("data-tui-timepicker-value");if(M){let a=L(M);a&&(n=a.hour,d=a.minute)}function p(){$(t,n,d,i,k),w(o,n,d),E(m,n,i),P(f,d),i&&T(o,n)}m.addEventListener("click",a=>{let s=a.target.closest("[data-tui-timepicker-hour]");if(!s)return;let l=parseInt(s.getAttribute("data-tui-timepicker-hour"),10);if(i){let I=n!==null&&n>=12;l===0?l=I?12:0:l=I?l+12:l}n=l,p()}),f.addEventListener("click",a=>{let s=a.target.closest("[data-tui-timepicker-minute]");s&&(d=parseInt(s.getAttribute("data-tui-timepicker-minute"),10),p())}),i&&o.addEventListener("click",a=>{let s=a.target.closest("[data-tui-timepicker-period]");if(!s)return;let l=s.getAttribute("data-tui-timepicker-period");n!==null&&(l==="AM"?n>=12&&(n=n===12?0:n-12):l==="PM"&&n<12&&(n=n===0?12:n+12),p())}),S.addEventListener("click",()=>{let a=t.closest("[data-tui-popover]")?.querySelector("[data-tui-popover-trigger]");a instanceof HTMLElement?a.click():t.click()}),p();let v=t.closest("form");v&&v.addEventListener("reset",()=>{n=null,d=null,p()}),t._timePickerCleanup=()=>{}}function b(t=document){t instanceof Element&&t.matches('[data-tui-timepicker="true"]')&&A(t),t.querySelectorAll('[data-tui-timepicker="true"]:not([data-tui-timepicker-initialized])').forEach(e=>{A(e)})}window.templUI=window.templUI||{},window.templUI.timePicker={init:b},document.addEventListener("DOMContentLoaded",()=>b())})();})();
