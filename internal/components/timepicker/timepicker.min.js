(()=>{(function(){function g(t){if(!t||typeof t!="string")return null;let n=t.match(/^(\d{1,2}):(\d{2})$/);if(!n)return null;let i=parseInt(n[1],10),e=parseInt(n[2],10);return i<0||i>23||e<0||e>59?null:{hour:i,minute:e}}function h(t,n,i){if(i){let e=t>=12?"PM":"AM";return`${(t===0?12:t>12?t-12:t).toString().padStart(2,"0")}:${n.toString().padStart(2,"0")} ${e}`}return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function T(t,n){return`${t.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`}function f(t,n,i){let e=document.createElement("button");return e.type="button",e.className=`w-full px-2 py-1 text-sm rounded hover:bg-muted transition-colors text-left ${i?"bg-primary text-primary-foreground":""}`,e.textContent=n,e.setAttribute("data-tui-timepicker-time-value",t.toString()),e}function C(t,n,i){if(t.innerHTML="",n){for(let e=12;e<=12;e++){let r=f(0,"12",i===0||i===12);t.appendChild(r);break}for(let e=1;e<=11;e++){let a=e,o=e.toString().padStart(2,"0"),l=i===e||i===e+12,r=f(a,o,l);t.appendChild(r)}}else for(let e=0;e<24;e++){let a=e.toString().padStart(2,"0"),l=f(e,a,i===e);t.appendChild(l)}}function I(t,n){t.innerHTML="";for(let i=0;i<60;i++){let e=i.toString().padStart(2,"0"),o=f(i,e,n===i);t.appendChild(o)}}function P(t,n,i,e){let a=t.querySelector('[data-tui-timepicker-period="AM"]'),o=t.querySelector('[data-tui-timepicker-period="PM"]');if(!a||!o)return;let l=n<12;a.textContent=i,o.textContent=e,a.className=`px-3 py-1 text-sm rounded-md border hover:bg-muted transition-colors ${l?"bg-primary text-primary-foreground":""}`,o.className=`px-3 py-1 text-sm rounded-md border hover:bg-muted transition-colors ${l?"":"bg-primary text-primary-foreground"}`}function q(t,n,i,e,a){let o=t.querySelector("[data-tui-timepicker-display]");if(o)if(n!==null&&i!==null){let l=h(n,i,e);o.textContent=l,o.classList.remove("text-muted-foreground")}else o.textContent=a,o.classList.add("text-muted-foreground")}function E(t,n,i){let e=t.querySelector("[data-tui-timepicker-hidden-input]");e&&(n!==null&&i!==null?e.value=T(n,i):e.value="")}function y(t){if(!t||t.hasAttribute("data-tui-timepicker-initialized"))return;t.setAttribute("data-tui-timepicker-initialized","true");let n=t.id,i=n+"-content",e=t.getAttribute("data-tui-timepicker-use12hours")==="true",a=t.getAttribute("data-tui-timepicker-am-label")||"AM",o=t.getAttribute("data-tui-timepicker-pm-label")||"PM",l=t.getAttribute("data-tui-timepicker-placeholder")||"Select time",r=null,c=null,M=document.getElementById(i);if(!M){console.error("TimePicker init error: Missing popup content.",{timePickerID:n,popupId:i});return}let s=M.querySelector("[data-tui-timepicker-popup]"),b=s?.querySelector("[data-tui-timepicker-hour-list]"),k=s?.querySelector("[data-tui-timepicker-minute-list]"),S=s?.querySelector("[data-tui-timepicker-done]");if(!s||!b||!k||!S){console.error("TimePicker init error: Missing required elements.",{timePickerID:n,popup:s,hourList:b,minuteList:k,doneButton:S});return}let x=s.getAttribute("data-tui-timepicker-value");if(x){let u=g(x);u&&(r=u.hour,c=u.minute)}function m(){q(t,r,c,e,l),E(s,r,c),C(b,e,r),I(k,c),e&&r!==null&&P(s,r,a,o)}b.addEventListener("click",u=>{let p=u.target.closest("[data-tui-timepicker-time-value]");if(!p)return;let d=parseInt(p.getAttribute("data-tui-timepicker-time-value"),10);if(e){let L=r!==null&&r>=12;d===0?d=L?12:0:d=L?d+12:d}r=d,c===null&&(c=0),m()}),k.addEventListener("click",u=>{let p=u.target.closest("[data-tui-timepicker-time-value]");p&&(c=parseInt(p.getAttribute("data-tui-timepicker-time-value"),10),r===null&&(r=e?12:0),m())}),e&&s.addEventListener("click",u=>{let p=u.target.closest("[data-tui-timepicker-period]");if(!p)return;let d=p.getAttribute("data-tui-timepicker-period");r===null&&(r=12),c===null&&(c=0),d==="AM"?r>=12&&(r=r===12?0:r-12):d==="PM"&&r<12&&(r=r===0?12:r+12),m()}),S.addEventListener("click",()=>{let u=t.closest("[data-tui-popover]")?.querySelector("[data-tui-popover-trigger]");u instanceof HTMLElement?u.click():t.click()}),m();let A=t.closest("form");A&&A.addEventListener("reset",()=>{r=null,c=null,m()}),t._timePickerCleanup=()=>{}}function v(t=document){t instanceof Element&&t.matches('[data-tui-timepicker="true"]')&&y(t),t.querySelectorAll('[data-tui-timepicker="true"]:not([data-tui-timepicker-initialized])').forEach(n=>{y(n)})}window.templUI=window.templUI||{},window.templUI.timePicker={init:v},document.addEventListener("DOMContentLoaded",()=>v())})();})();
