(()=>{(function(){function q(t){if(!t||typeof t!="string")return null;let e=t.match(/^(\d{1,2}):(\d{2})$/);if(!e)return null;let i=parseInt(e[1],10),n=parseInt(e[2],10);return i<0||i>23||n<0||n>59?null:{hour:i,minute:n}}function D(t,e,i){if(i){let n=t>=12?"PM":"AM";return`${(t===0?12:t>12?t-12:t).toString().padStart(2,"0")}:${e.toString().padStart(2,"0")} ${n}`}return`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}function g(t,e){return`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}function A(t,e,i,n){if(!i&&!n)return!0;let u=t*60+e;if(i){let a=i.hour*60+i.minute;if(u<a)return!1}if(n){let a=n.hour*60+n.minute;if(u>a)return!1}return!0}function P(t,e,i,n){if(!i&&!n)return!0;for(let u=0;u<60;u++)if(A(t,u,i,n))return!0;return!1}function z(t,e,i,n,u,a){t.querySelectorAll("[data-tui-timepicker-hour]").forEach(o=>{let d=parseInt(o.getAttribute("data-tui-timepicker-hour")),m=!1;e!==null&&(i?m=d===e||d===0&&e===12||d===e-12&&e>12:m=d===e);let I=i&&d===0?e>=12?12:0:d,r=P(I,n,u,a);o.setAttribute("data-tui-timepicker-selected",m?"true":"false"),o.disabled=!r,r?o.classList.remove("opacity-50","cursor-not-allowed"):o.classList.add("opacity-50","cursor-not-allowed")})}function H(t,e,i,n,u){t.querySelectorAll("[data-tui-timepicker-minute]").forEach(a=>{let o=parseInt(a.getAttribute("data-tui-timepicker-minute")),d=o===e,m=i===null||A(i,o,n,u);a.setAttribute("data-tui-timepicker-selected",d?"true":"false"),a.disabled=!m,m?a.classList.remove("opacity-50","cursor-not-allowed"):a.classList.add("opacity-50","cursor-not-allowed")})}function U(t,e){let i=t.querySelector('[data-tui-timepicker-period="AM"]'),n=t.querySelector('[data-tui-timepicker-period="PM"]');if(!i||!n)return;let u=e===null||e<12;i.setAttribute("data-tui-timepicker-active",u?"true":"false"),n.setAttribute("data-tui-timepicker-active",u?"false":"true")}function O(t,e,i,n,u){let a=t.querySelector("[data-tui-timepicker-display]");if(a)if(e!==null&&i!==null){let o=D(e,i,n);a.textContent=o,a.classList.remove("text-muted-foreground")}else a.textContent=u,a.classList.add("text-muted-foreground")}function R(t,e,i){t&&(e!==null&&i!==null?t.value=g(e,i):t.value="")}function $(t){if(!t||t.hasAttribute("data-tui-timepicker-initialized"))return;t.setAttribute("data-tui-timepicker-initialized","true");let e=t.id,i=e+"-content",n=t.getAttribute("data-tui-timepicker-use12hours")==="true",u=t.getAttribute("data-tui-timepicker-am-label")||"AM",a=t.getAttribute("data-tui-timepicker-pm-label")||"PM",o=t.getAttribute("data-tui-timepicker-placeholder")||"Select time",d=parseInt(t.getAttribute("data-tui-timepicker-step")||"1",10),m=t.getAttribute("data-tui-timepicker-min-time")||"",I=t.getAttribute("data-tui-timepicker-max-time")||"",r=null,l=null,y=m?q(m):null,b=I?q(I):null,_=e+"-hidden",k=document.getElementById(_);if(!k){let c=t.parentElement;c&&(k=c.querySelector("[data-tui-timepicker-hidden-input]"))}let C=document.getElementById(i);if(!C){console.error("TimePicker init error: Missing popup content.",{timePickerID:e,popupId:i});return}let S=C.querySelector("[data-tui-timepicker-popup]"),L=S?.querySelector("[data-tui-timepicker-hour-list]"),h=S?.querySelector("[data-tui-timepicker-minute-list]"),w=S?.querySelector("[data-tui-timepicker-done]");if(!S||!L||!h||!w||!k){console.error("TimePicker init error: Missing required elements.",{timePickerID:e,popup:S,hourList:L,minuteList:h,doneButton:w,hiddenInput:k});return}let V=k.value||S.getAttribute("data-tui-timepicker-value");if(V){let c=q(V);c&&(r=c.hour,l=c.minute)}function v(){O(t,r,l,n,o),R(k,r,l),z(L,r,n),H(h,l),n&&U(S,r)}L.addEventListener("click",c=>{let p=c.target.closest("[data-tui-timepicker-hour]");if(!p||p.disabled)return;let s=parseInt(p.getAttribute("data-tui-timepicker-hour"),10);if(n){let f=r!==null&&r>=12;s===0?s=f?12:0:s=f?s+12:s}if(P(s,l,y,b)){if(r=s,l!==null&&!A(r,l,y,b)){let f=null;for(let M=0;M<60;M+=d)if(A(r,M,y,b)){f=M;break}l=f}v()}}),h.addEventListener("click",c=>{let p=c.target.closest("[data-tui-timepicker-minute]");if(!p||p.disabled)return;let s=parseInt(p.getAttribute("data-tui-timepicker-minute"),10);r!==null&&!A(r,s,y,b)||(l=s,v())}),n&&S.addEventListener("click",c=>{let p=c.target.closest("[data-tui-timepicker-period]");if(!p)return;let s=p.getAttribute("data-tui-timepicker-period");if(r===null)return;let f=r;if(s==="AM"?r>=12&&(f=r===12?0:r-12):s==="PM"&&r<12&&(f=r===0?12:r+12),!!P(f,l,y,b)){if(r=f,l!==null&&!A(r,l,y,b)){let M=null;for(let E=0;E<60;E+=d)if(A(r,E,y,b)){M=E;break}l=M}v()}}),w.addEventListener("click",()=>{let c=t.closest("[data-tui-popover]")?.querySelector("[data-tui-popover-trigger]");c instanceof HTMLElement?c.click():t.click()}),v();let x=k.closest("form")||t.closest("form");x&&x.addEventListener("reset",()=>{r=null,l=null,k.value="",v()}),t._timePickerCleanup=()=>{}}function T(t=document){t instanceof Element&&t.matches('[data-tui-timepicker="true"]')&&$(t),t.querySelectorAll('[data-tui-timepicker="true"]:not([data-tui-timepicker-initialized])').forEach(e=>{$(e)})}window.templUI=window.templUI||{},window.templUI.timePicker={init:T},document.addEventListener("DOMContentLoaded",()=>T())})();})();
