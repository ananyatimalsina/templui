(()=>{typeof window.modalState>"u"&&(window.modalState={openModalId:null});(function(){function n(t,e=!1){if(!t||t.style.display==="none")return;let a=t.querySelector("[data-modal-content]"),d=t.id;t.classList.remove("opacity-100"),t.classList.add("opacity-0"),a&&(a.classList.remove("scale-100","opacity-100"),a.classList.add("scale-95","opacity-0"));function o(){t.style.display="none",window.modalState.openModalId===d&&(window.modalState.openModalId=null,document.body.style.overflow="")}e?o():setTimeout(o,300)}function i(t){if(!t)return;if(window.modalState.openModalId){let a=document.getElementById(window.modalState.openModalId);a&&a!==t&&n(a,!0)}let e=t.querySelector("[data-modal-content]");t.style.display="flex",window.modalState.openModalId=t.id,document.body.style.overflow="hidden",t.offsetHeight,t.classList.remove("opacity-0"),t.classList.add("opacity-100"),e&&(e.classList.remove("scale-95","opacity-0"),e.classList.add("scale-100","opacity-100"),setTimeout(()=>{let a=e.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');a&&a.focus()},50))}function r(t,e=!1){let a=document.getElementById(t);a&&n(a,e)}function u(t){let e=document.getElementById(t);e&&i(e)}function m(t){let e=window.modalState.openModalId;if(!e)return;let a=document.getElementById(e);if(!a||a.getAttribute("data-disable-click-away")==="true")return;let d=a.querySelector("[data-modal-content]"),o=t.target.closest("[data-modal-trigger]");d&&!d.contains(t.target)&&(!o||o.getAttribute("data-modal-target-id")!==e)&&n(a)}function y(t){if(t.key!=="Escape"||!window.modalState.openModalId)return;let e=document.getElementById(window.modalState.openModalId);e&&e.getAttribute("data-disable-esc")!=="true"&&n(e)}function l(t){let e=t.getAttribute("data-modal-target-id");e&&t.addEventListener("click",()=>{!t.hasAttribute("disabled")&&!t.classList.contains("opacity-50")&&u(e)})}function c(t){t.addEventListener("click",()=>{let e=t.getAttribute("data-modal-target-id");if(e)r(e);else{let a=t.closest("[data-modal]");a&&a.id&&n(a)}})}function s(t=document){t instanceof Element&&t.matches("[data-modal-trigger]")&&l(t);for(let e of t.querySelectorAll("[data-modal-trigger]"))l(e);t instanceof Element&&t.matches("[data-modal-close]")&&c(t);for(let e of t.querySelectorAll("[data-modal-close]"))c(e);t instanceof Element&&t.matches("[data-modal][data-initial-open='true']")&&i(t);for(let e of t.querySelectorAll("[data-modal][data-initial-open='true']"))i(e)}let f=t=>{let e;t.type==="htmx:afterSwap"&&(e=t.detail.elt),t.type==="htmx:oobAfterSwap"&&(e=t.detail.target),e instanceof Element&&requestAnimationFrame(()=>s(e))};typeof window.modalEventsInitialized>"u"&&(document.addEventListener("click",m),document.addEventListener("keydown",y),window.modalEventsInitialized=!0),document.addEventListener("DOMContentLoaded",()=>s()),document.body.addEventListener("htmx:afterSwap",f),document.body.addEventListener("htmx:oobAfterSwap",f)})();})();
