(()=>{typeof window.modalState>"u"&&(window.modalState={openModalId:null});(function(){function a(t,e=!1){if(!t||t.style.display==="none")return;let n=t.querySelector("[data-modal-content]"),o=t.id;t.setAttribute("data-open","false"),i(o,!1),t.classList.remove("opacity-100"),t.classList.add("opacity-0"),n&&(n.classList.remove("scale-100","opacity-100"),n.classList.add("scale-95","opacity-0"));function d(){t.style.display="none",window.modalState.openModalId===o&&(window.modalState.openModalId=null,document.body.style.overflow="")}e?d():setTimeout(d,300)}function i(t,e){document.querySelectorAll(`[data-modal-trigger="${t}"]`).forEach(o=>{o.setAttribute("data-open",e.toString())})}function l(t){if(!t)return;if(window.modalState.openModalId){let n=document.getElementById(window.modalState.openModalId);n&&n!==t&&a(n,!0)}let e=t.querySelector("[data-modal-content]");t.style.display="flex",t.setAttribute("data-open","true"),i(t.id,!0),window.modalState.openModalId=t.id,document.body.style.overflow="hidden",t.offsetHeight,t.classList.remove("opacity-0"),t.classList.add("opacity-100"),e&&(e.classList.remove("scale-95","opacity-0"),e.classList.add("scale-100","opacity-100"),setTimeout(()=>{let n=e.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])');n&&n.focus()},50))}function u(t,e=!1){let n=document.getElementById(t);n&&a(n,e)}function m(t){let e=document.getElementById(t);e&&l(e)}function y(t){let e=window.modalState.openModalId;if(!e)return;let n=document.getElementById(e);if(!n||n.getAttribute("data-disable-click-away")==="true")return;let o=n.querySelector("[data-modal-content]"),d=t.target.closest("[data-modal-trigger]");o&&!o.contains(t.target)&&(!d||d.getAttribute("data-modal-trigger")!==e)&&a(n)}function p(t){if(t.key!=="Escape"||!window.modalState.openModalId)return;let e=document.getElementById(window.modalState.openModalId);e&&e.getAttribute("data-disable-esc")!=="true"&&a(e)}function c(t){let e=t.getAttribute("data-modal-trigger");e&&t.addEventListener("click",()=>{!t.hasAttribute("disabled")&&!t.classList.contains("opacity-50")&&m(e)})}function s(t){t.addEventListener("click",()=>{let e=t.getAttribute("data-modal-close");if(e)u(e);else{let n=t.closest("[data-modal]");n&&n.id&&a(n)}})}function r(t=document){t instanceof Element&&t.matches("[data-modal-trigger]")&&c(t);for(let e of t.querySelectorAll("[data-modal-trigger]"))c(e);t instanceof Element&&t.matches("[data-modal-close]")&&s(t);for(let e of t.querySelectorAll("[data-modal-close]"))s(e);t instanceof Element&&t.matches("[data-modal]")&&f(t);for(let e of t.querySelectorAll("[data-modal]"))f(e)}function f(t){t.id&&i(t.id,!1),t.getAttribute("data-initial-open")==="true"&&l(t)}window.templUI||(window.templUI={}),window.templUI.modal={initAllComponents:r},typeof window.modalEventsInitialized>"u"&&(document.addEventListener("click",y),document.addEventListener("keydown",p),window.modalEventsInitialized=!0),document.addEventListener("DOMContentLoaded",()=>r())})();})();
