(()=>{(function(){let o=new Map,n=null;function g(e,t){document.querySelectorAll(`[data-modal-trigger="${e}"]`).forEach(a=>{a.setAttribute("data-open",t)})}function b(e){let t=e.id,a=e.querySelector("[data-modal-content]"),u=e.hasAttribute("data-initial-open");if(!a||!t)return null;let c=u;function l(i){c=i,e.style.display=i?"flex":"none",e.setAttribute("data-open",i),g(t,i),i?(n=t,document.body.style.overflow="hidden",e.classList.remove("opacity-0"),e.classList.add("opacity-100"),a.classList.remove("scale-95","opacity-0"),a.classList.add("scale-100","opacity-100"),setTimeout(()=>{a.querySelector('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])')?.focus()},50)):(n===t&&(n=null,document.body.style.overflow=""),e.classList.remove("opacity-100"),e.classList.add("opacity-0"),a.classList.remove("scale-100","opacity-100"),a.classList.add("scale-95","opacity-0"))}function f(){n&&n!==t&&o.get(n)?.close(!0),e.style.display="flex",e.offsetHeight,l(!0),document.addEventListener("keydown",y),document.addEventListener("click",p)}function s(i=!1){l(!1),document.removeEventListener("keydown",y),document.removeEventListener("click",p),i||setTimeout(()=>{c||(e.style.display="none")},300)}function L(){c?s():f()}function y(i){i.key==="Escape"&&c&&e.getAttribute("data-disable-esc")!=="true"&&s()}function p(i){e.getAttribute("data-disable-click-away")!=="true"&&!a.contains(i.target)&&!m(i.target)&&s()}function m(i){let d=i.closest("[data-modal-trigger]");return d&&d.getAttribute("data-modal-trigger")===t}return e.querySelectorAll("[data-modal-close]").forEach(i=>{i.addEventListener("click",s)}),l(u),{open:f,close:s,toggle:L}}function r(e=document){e.querySelectorAll("[data-modal]").forEach(t=>{if(t.dataset.initialized)return;t.dataset.initialized="true";let a=b(t);a&&t.id&&o.set(t.id,a)}),e.querySelectorAll("[data-modal-trigger]").forEach(t=>{if(t.dataset.initialized)return;t.dataset.initialized="true";let a=t.getAttribute("data-modal-trigger");t.addEventListener("click",()=>{!t.hasAttribute("disabled")&&!t.classList.contains("opacity-50")&&o.get(a)?.toggle()})})}window.templUI=window.templUI||{},window.templUI.modal={init:r},document.addEventListener("DOMContentLoaded",()=>r())})();})();
