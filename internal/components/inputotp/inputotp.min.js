(()=>{typeof window.inputOTPState>"u"&&(window.inputOTPState=new WeakMap);(function(){if(window.inputOTPSystemInitialized)return;function p(n){if(window.inputOTPState.has(n))return;let a=n.querySelector("[data-input-otp-value-target]"),i=Array.from(n.querySelectorAll("[data-input-otp-slot]")).sort((t,e)=>parseInt(t.dataset.inputIndex)-parseInt(e.dataset.inputIndex));if(!a||i.length===0)return;n.hasAttribute("autofocus")&&requestAnimationFrame(()=>{let t=i[0];t&&(t.focus(),t.select())});let o=()=>{a.value=i.map(t=>t.value).join("")},v=()=>i.findIndex(t=>!t.value),d=t=>{t>=0&&t<i.length&&(i[t].focus(),setTimeout(()=>i[t].select(),0))},h=t=>{let e=t.target,s=parseInt(e.dataset.inputIndex);if(e.value===" "){e.value="";return}e.value.length>1&&(e.value=e.value.slice(-1)),e.value&&s<i.length-1&&d(s+1),o()},w=t=>{let e=t.target,s=parseInt(e.dataset.inputIndex);if(t.key==="Backspace"){let l=e.value;s>0&&(t.preventDefault(),l?(e.value="",o(),d(s-1)):(i[s-1].value="",o(),d(s-1)))}else t.key==="ArrowLeft"&&s>0?(t.preventDefault(),d(s-1)):t.key==="ArrowRight"&&s<i.length-1&&(t.preventDefault(),d(s+1))},I=t=>{let e=t.target,s=parseInt(e.dataset.inputIndex),l=v();if(l!==-1&&s!==l){d(l);return}setTimeout(()=>e.select(),0)},g=t=>{t.preventDefault();let s=(t.clipboardData||window.clipboardData).getData("text").replace(/\s/g,"").split(""),l=0,y=i.find(r=>r===document.activeElement);y&&(l=parseInt(y.dataset.inputIndex));for(let r=0;r<s.length&&l<i.length;r++)i[l].value=s[r],l++;o();let u=v();u===-1?u=i.length-1:u>0&&u>l&&(u=l),d(Math.min(u,i.length-1))};for(let t of i)t.addEventListener("input",h),t.addEventListener("keydown",w),t.addEventListener("focus",I);n.addEventListener("paste",g);let S=a.id;if(S){for(let t of document.querySelectorAll(`label[for="${S}"]`))if(!t.dataset.inputOtpListener){let e=s=>{s.preventDefault(),i.length>0&&d(0)};t.addEventListener("click",e),t.dataset.inputOtpListener="true",t._inputOtpClickListener=e}}if(n.dataset.value){let t=n.dataset.value;for(let e=0;e<i.length&&e<t.length;e++)i[e].value=t[e];o()}let L={slots:i,hiddenInput:a,handleInput:h,handleKeydown:w,handleFocus:I,handlePaste:g};window.inputOTPState.set(n,L)}function c(n){let a=window.inputOTPState.get(n);if(!a)return;for(let o of a.slots)o.removeEventListener("input",a.handleInput),o.removeEventListener("keydown",a.handleKeydown),o.removeEventListener("focus",a.handleFocus);n.removeEventListener("paste",a.handlePaste);let i=a.hiddenInput.id;if(i)for(let o of document.querySelectorAll(`label[for="${i}"]`))o._inputOtpClickListener&&(o.removeEventListener("click",o._inputOtpClickListener),delete o._inputOtpClickListener,delete o.dataset.inputOtpListener);window.inputOTPState.delete(n)}function f(n=document){n instanceof Element&&n.matches("[data-input-otp]")&&p(n),n.querySelectorAll("[data-input-otp]").forEach(p)}let m=n=>{let a;n.type==="htmx:afterSwap"&&(a=n.detail.elt),n.type==="htmx:oobAfterSwap"&&(a=n.detail.target),a instanceof Element&&requestAnimationFrame(()=>f(a))};document.addEventListener("DOMContentLoaded",()=>f()),document.body.addEventListener("htmx:beforeSwap",n=>{let a=n.detail.target||n.detail.elt;if(a instanceof Element&&(a.matches&&a.matches("[data-input-otp]")&&c(a),a.querySelectorAll))for(let i of a.querySelectorAll("[data-input-otp]"))c(i)}),document.body.addEventListener("htmx:afterSwap",m),document.body.addEventListener("htmx:oobAfterSwap",m),window.inputOTPSystemInitialized=!0})();})();
