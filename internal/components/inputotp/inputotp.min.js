(()=>{typeof window.inputOTPState>"u"&&(window.inputOTPState=new WeakMap);(function(){if(window.inputOTPSystemInitialized)return;function p(i){if(!i||i.hasAttribute("data-tui-inputotp-initialized"))return;i.setAttribute("data-tui-inputotp-initialized","true");let o=i.querySelector("[data-tui-inputotp-value-target]"),n=Array.from(i.querySelectorAll("[data-tui-inputotp-slot]")).sort((t,e)=>parseInt(t.getAttribute("data-tui-inputotp-index"))-parseInt(e.getAttribute("data-tui-inputotp-index")));if(!o||n.length===0)return;i.hasAttribute("autofocus")&&requestAnimationFrame(()=>{let t=n[0];t&&(t.focus(),t.select())});let a=()=>{o.value=n.map(t=>t.value).join("")},f=()=>n.findIndex(t=>!t.value),s=t=>{t>=0&&t<n.length&&(n[t].focus(),setTimeout(()=>n[t].select(),0))},v=t=>{let e=t.target,u=parseInt(e.getAttribute("data-tui-inputotp-index"));if(e.value===" "){e.value="";return}e.value.length>1&&(e.value=e.value.slice(-1)),e.value&&u<n.length-1&&s(u+1),a()},g=t=>{let e=t.target,u=parseInt(e.getAttribute("data-tui-inputotp-index"));if(t.key==="Backspace"){let l=e.value;u>0&&(t.preventDefault(),l?(e.value="",a(),s(u-1)):(n[u-1].value="",a(),s(u-1)))}else t.key==="ArrowLeft"&&u>0?(t.preventDefault(),s(u-1)):t.key==="ArrowRight"&&u<n.length-1&&(t.preventDefault(),s(u+1))},h=t=>{let e=t.target,u=parseInt(e.getAttribute("data-tui-inputotp-index")),l=f();if(l!==-1&&u!==l){s(l);return}setTimeout(()=>e.select(),0)},w=t=>{t.preventDefault();let u=(t.clipboardData||window.clipboardData).getData("text").replace(/\s/g,"").split(""),l=0,I=n.find(r=>r===document.activeElement);I&&(l=parseInt(I.getAttribute("data-tui-inputotp-index")));for(let r=0;r<u.length&&l<n.length;r++)n[l].value=u[r],l++;a();let d=f();d===-1?d=n.length-1:d>0&&d>l&&(d=l),s(Math.min(d,n.length-1))};for(let t of n)t.addEventListener("input",v),t.addEventListener("keydown",g),t.addEventListener("focus",h);i.addEventListener("paste",w);let m=o.id;if(m){for(let t of document.querySelectorAll(`label[for="${m}"]`))if(!t.dataset.tuiInputotpListener){let e=u=>{u.preventDefault(),n.length>0&&s(0)};t.addEventListener("click",e),t.setAttribute("data-tui-inputotp-listener","true"),t._inputOtpClickListener=e}}if(i.getAttribute("data-tui-inputotp-value")){let t=i.getAttribute("data-tui-inputotp-value");for(let e=0;e<n.length&&e<t.length;e++)n[e].value=t[e];a()}let b={slots:n,hiddenInput:o,handleInput:v,handleKeydown:g,handleFocus:h,handlePaste:w};window.inputOTPState.set(i,b)}function A(i){let o=window.inputOTPState.get(i);if(!o)return;for(let a of o.slots)a.removeEventListener("input",o.handleInput),a.removeEventListener("keydown",o.handleKeydown),a.removeEventListener("focus",o.handleFocus);i.removeEventListener("paste",o.handlePaste);let n=o.hiddenInput.id;if(n)for(let a of document.querySelectorAll(`label[for="${n}"]`))a._inputOtpClickListener&&(a.removeEventListener("click",a._inputOtpClickListener),delete a._inputOtpClickListener,a.removeAttribute("data-tui-inputotp-listener"));window.inputOTPState.delete(i)}function c(i=document){i instanceof Element&&i.matches("[data-tui-inputotp]")&&p(i),i.querySelectorAll("[data-tui-inputotp]:not([data-tui-inputotp-initialized])").forEach(p)}window.templUI=window.templUI||{},window.templUI.inputOTP={init:c,cleanup:A},document.addEventListener("DOMContentLoaded",()=>c()),window.inputOTPSystemInitialized=!0})();})();
